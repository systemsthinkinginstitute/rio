!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){var t=function e(t,r,n){if(t.getAttribute("ref")==r)return t;var i=!0,a=!1,o=void 0;try{for(var s,u=t.children[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;if(!n||!l.hasAttribute("data-rio-view")){var d=e(l,r,!0);if(d)return d}}}catch(e){a=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw o}}return null},r={get:function(r,n){if(r[n])return r[n];if(e.el){var i=t(e.el,n);return r[n]=i,i}return null}};return new Proxy({},r)}Object.defineProperty(t,"__esModule",{value:!0}),t.View=t.rio=void 0;var o=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),l=n(u),d=r(2),f=n(d),c={idInstances:{},fns:{},fids:new WeakMap,styles:[],updateOpts:{}},h=function(){function e(){i(this,e);var t=this.key.apply(this,arguments);if(c.idInstances[t])return c.idInstances[t];this.handlers={mount:[],update:[],updated:[],unmount:[]},this.initialize.apply(this,arguments),this.finalize.apply(this),this.refs=a(this),this._id=t,this._fids=[],this.parent=null,this._updatedQueue=[],this._mounted=!1,this._depth=0,this.views={},c.fids.set(this,new WeakMap)}return s(e,[{key:"namespace",value:function(){return this.constructor.name}},{key:"initialize",value:function(){}},{key:"finalize",value:function(){}},{key:"render",value:function(){}},{key:"style",value:function(){}},{key:"key",value:function(){throw new Error("Please define a 'key' method that returns a deterministic key for a given instance.")}},{key:"_register",value:function(){c.idInstances[this._id]=this}},{key:"_injectStyle",value:function(){var e="",t=!0,r=!1,n=void 0;try{for(var i,a=c.styles[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=o(i.value,2);s[0];e+=s[1]}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}var u=document.createElement("style");u.innerHTML=e,this.el.parentNode.insertBefore(u,this.el)}},{key:"_harvestViews",value:function(){var e=Array.from(this.el.querySelectorAll("[data-rio-id]")),t=[],r=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value,u=c.idInstances[s.getAttribute("data-rio-id")];u.el=s,t.push(u)}}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}t=t.sort(function(e,t){return t._depth-e._depth});var l=!0,d=!1,f=void 0;try{for(var h,p=t[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var v=h.value;v.dispatch("mount"),v._mounted=!0}}catch(e){d=!0,f=e}finally{try{!l&&p.return&&p.return()}finally{if(d)throw f}}}},{key:"_setEl",value:function(e){this.el=e,this.refs=a(this)}},{key:"_parent",value:function(e){this.parent=e}},{key:"_renderView",value:function(e){if(e._mounted&&!1===e.shouldUpdate(c.updateOpts)){var t=e.el.outerHTML;return t=t.replace(/(<[\w\-]+)/,"$1 data-rio-should-render-false")}e._parent(this);var r=e.namespace();this.views[r]=this.views[r]||[],this.views[r].push(e),e._depth=this._depth+1,e._mounted&&e.dispatch("update");var n=e.render();return e._mounted&&this._updatedQueue.push(e),n}},{key:"tmpl",value:function(t){var r=this;c.styles.find(function(e){return e[0]==r.namespace()})||c.styles.push([this.namespace(),this.style()]);var n="";this._updatedQueue.length=0;for(var i=0;i<t.length;i++)if(n+=t[i],i<(arguments.length<=1?0:arguments.length-1)){var a=arguments.length<=i+1?void 0:arguments[i+1];if(a instanceof e)n+=this._renderView(a);else if("function"==typeof a){var o=function(e){var t=void 0;if(c.fids.get(r).has(e))t=c.fids.get(r).get(e);else{t="ev"+String(parseInt(Math.random()*Number.MAX_SAFE_INTEGER-1));var n=function(){return e.bind(r)(window.event),window.event.defaultPrevented};c.fids.get(r).set(e,t),c.fns[t]=n,r._fids.push(t)}return t}(a);n+='"rio.fns.'+o+'()"'}else if(Array.isArray(a)){for(var s=0;s<a.length;s++)a[s]instanceof e&&(a[s]=this._renderView(a[s]));n+=a.join("")}else n+=null===a||void 0===a?"":a}return this._register(this._id,this),n=n.replace(/(<[\w\-]+)/,'$1 data-rio-id="'+this._id+'" data-rio-view="'+this.namespace()+'"')}},{key:"css",value:function(e){for(var t="",r=0;r<e.length;r++)t+=e[r],r<(arguments.length<=1?0:arguments.length-1)&&(t+=arguments.length<=r+1?void 0:arguments[r+1]);var n="[data-rio-view="+this.namespace()+"]";return t=f.default.serialize(f.default.namespace(t,n))}},{key:"mount",value:function(e){try{window.rio=p}catch(e){}this.el=e,this.html=this.render(),this._injectStyle(),this.el.innerHTML=this.html,this._harvestViews()}},{key:"unmount",value:function(){var e=this,t=!0,r=!1,n=void 0;try{for(var i,a=this._fids[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;delete c.fns[o]}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}if(this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.parent){var s=this.namespace(),u=this.parent.views[s].findIndex(function(t){return t==e});this.parent.views[s].splice(u,1)}}},{key:"shouldUpdate",value:function(){return!0}},{key:"update",value:function(e){if((!this._mounted||!1!==this.shouldUpdate(e))&&this.el){this.dispatch("update");var t=this.render().trim();c.updateOpts=e;try{var r=function(e){return e.nodeType==Node.ELEMENT_NODE};for((0,l.default)(this.el,t,{getNodeKey:function(e){return r(e)?e.getAttribute("data-rio-id")||e.id:e.id},onNodeDiscarded:function(e){if(r(e)&&e.hasAttribute("data-rio-id")){var t=e.getAttribute("data-rio-id"),n=c.idInstances[t];n.dispatch("unmount"),n.unmount()}},onBeforeNodeDiscarded:function(e){return r(e)&&!e.hasAttribute("rio-sacrosanct")},onBeforeElUpdated:function(e,t){return!t.hasAttribute("data-rio-should-render-false")&&((!r(e)||document.activeElement!=e||!e.hasAttribute("rio-uninterruptable-input"))&&void 0)},onBeforeNodeAdded:function(e){if(r(e)&&e.hasAttribute("data-rio-id")){var t=e.getAttribute("data-rio-id"),n=c.idInstances[t];n&&n.el&&n.el.parentNode&&n.el.parentNode.removeChild(n.el),n._setEl(e)}},onNodeAdded:function(e){if(r(e)&&e.hasAttribute("data-rio-view")&&e.hasAttribute("data-rio-id")){var t=e.getAttribute("data-rio-id"),n=c.idInstances[t];n.el=e,n._mounted||(n.dispatch("mount"),n._mounted=!0)}}});this._updatedQueue.length;){this._updatedQueue.shift().dispatch("updated")}this.dispatch("updated")}catch(e){throw e}finally{c.updateOpts={}}}}},{key:"on",value:function(e,t){if(!this.handlers[e])throw new Error("no event "+e);this.handlers[e].push(t)}},{key:"dispatch",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,a=this.handlers[e][Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.call(this)}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}}},{key:"root",get:function(){return this.el}}]),e}(),p={fns:c.fns,View:h};t.rio=p,t.View=h},function(e,t,r){"use strict";function n(e){!f&&p.createRange&&(f=p.createRange(),f.selectNode(p.body));var t;return f&&f.createContextualFragment?t=f.createContextualFragment(e):(t=p.createElement("body"),t.innerHTML=e),t.childNodes[0]}function i(e,t){var r=e.nodeName,n=t.nodeName;return r===n||!!(t.actualize&&r.charCodeAt(0)<91&&n.charCodeAt(0)>90)&&r===n.toUpperCase()}function a(e,t){return t&&t!==h?p.createElementNS(t,e):p.createElement(e)}function o(e,t){for(var r=e.firstChild;r;){var n=r.nextSibling;t.appendChild(r),r=n}return t}function s(e,t){var r,n,i,a,o,s=t.attributes;for(r=s.length-1;r>=0;--r)n=s[r],i=n.name,a=n.namespaceURI,o=n.value,a?(i=n.localName||i,e.getAttributeNS(a,i)!==o&&e.setAttributeNS(a,i,o)):e.getAttribute(i)!==o&&e.setAttribute(i,o);for(s=e.attributes,r=s.length-1;r>=0;--r)n=s[r],!1!==n.specified&&(i=n.name,a=n.namespaceURI,a?(i=n.localName||i,m(t,a,i)||e.removeAttributeNS(a,i)):m(t,null,i)||e.removeAttribute(i))}function u(e,t,r){e[r]!==t[r]&&(e[r]=t[r],e[r]?e.setAttribute(r,""):e.removeAttribute(r,""))}function l(){}function d(e){return e.id}var f,c,h="http://www.w3.org/1999/xhtml",p="undefined"==typeof document?void 0:document,v=p?p.body||p.createElement("div"):{};c=v.hasAttributeNS?function(e,t,r){return e.hasAttributeNS(t,r)}:v.hasAttribute?function(e,t,r){return e.hasAttribute(r)}:function(e,t,r){return null!=e.getAttributeNode(t,r)};var m=c,y={OPTION:function(e,t){u(e,t,"selected")},INPUT:function(e,t){u(e,t,"checked"),u(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),m(t,null,"value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var r=t.value;e.value!==r&&(e.value=r);var n=e.firstChild;if(n){var i=n.nodeValue;if(i==r||!r&&i==e.placeholder)return;n.nodeValue=r}},SELECT:function(e,t){if(!m(t,null,"multiple")){for(var r=0,n=t.firstChild;n;){var i=n.nodeName;if(i&&"OPTION"===i.toUpperCase()){if(m(n,null,"selected")){r;break}r++}n=n.nextSibling}e.selectedIndex=r}}},g=1,b=3,S=8,x=function(e){return function(t,r,s){function u(e){w?w.push(e):w=[e]}function f(e,t){if(e.nodeType===g)for(var r=e.firstChild;r;){var n=void 0;t&&(n=N(r))?u(n):(R(r),r.firstChild&&f(r,t)),r=r.nextSibling}}function c(e,t,r){!1!==C(e)&&(t&&t.removeChild(e),R(e),f(e,r))}function h(e){if(e.nodeType===g)for(var t=e.firstChild;t;){var r=N(t);r&&(I[r]=t),h(t),t=t.nextSibling}}function v(e){A(e);for(var t=e.firstChild;t;){var r=t.nextSibling,n=N(t);if(n){var a=I[n];a&&i(t,a)&&(t.parentNode.replaceChild(a,t),m(a,t))}v(t),t=r}}function m(n,a,o){var s,l=N(a);if(l&&delete I[l],!r.isSameNode||!r.isSameNode(t)){if(!o){if(!1===k(n,a))return;if(e(n,a),E(n),!1===O(n,a))return}if("TEXTAREA"!==n.nodeName){var d,f,h,x,w=a.firstChild,A=n.firstChild;e:for(;w;){for(h=w.nextSibling,d=N(w);A;){if(f=A.nextSibling,w.isSameNode&&w.isSameNode(A)){w=h,A=f;continue e}s=N(A);var C=A.nodeType,R=void 0;if(C===w.nodeType&&(C===g?(d?d!==s&&((x=I[d])?A.nextSibling===x?R=!1:(n.insertBefore(x,A),f=A.nextSibling,s?u(s):c(A,n,!0),A=x):R=!1):s&&(R=!1),(R=!1!==R&&i(A,w))&&m(A,w)):C!==b&&C!=S||(R=!0,A.nodeValue!==w.nodeValue&&(A.nodeValue=w.nodeValue))),R){w=h,A=f;continue e}s?u(s):c(A,n,!0),A=f}if(d&&(x=I[d])&&i(x,w))n.appendChild(x),m(x,w);else{var T=_(w);!1!==T&&(T&&(w=T),w.actualize&&(w=w.actualize(n.ownerDocument||p)),n.appendChild(w),v(w))}w=h,A=f}for(;A;)f=A.nextSibling,(s=N(A))?u(s):c(A,n,!0),A=f}var V=y[n.nodeName];V&&V(n,a)}}if(s||(s={}),"string"==typeof r)if("#document"===t.nodeName||"HTML"===t.nodeName){var x=r;r=p.createElement("html"),r.innerHTML=x}else r=n(r);var w,N=s.getNodeKey||d,_=s.onBeforeNodeAdded||l,A=s.onNodeAdded||l,k=s.onBeforeElUpdated||l,E=s.onElUpdated||l,C=s.onBeforeNodeDiscarded||l,R=s.onNodeDiscarded||l,O=s.onBeforeElChildrenUpdated||l,T=!0===s.childrenOnly,I={};h(t);var V=t,j=V.nodeType,M=r.nodeType;if(!T)if(j===g)M===g?i(t,r)||(R(t),V=o(t,a(r.nodeName,r.namespaceURI))):V=r;else if(j===b||j===S){if(M===j)return V.nodeValue!==r.nodeValue&&(V.nodeValue=r.nodeValue),V;V=r}if(V===r)R(t);else if(m(V,r,T),w)for(var U=0,z=w.length;U<z;U++){var P=I[w[U]];P&&c(P,P.parentNode,!1)}return!T&&V!==t&&t.parentNode&&(V.actualize&&(V=V.actualize(t.ownerDocument||p)),t.parentNode.replaceChild(V,t)),V}}(s);e.exports=x},function(e,t,r){"use strict";var n=function(){this.cssImportStatements=[],this.cssKeyframeStatements=[],this.cssRegex=new RegExp("([\\s\\S]*?){([\\s\\S]*?)}","gi"),this.cssMediaQueryRegex="((@media [\\s\\S]*?){([\\s\\S]*?}\\s*?)})",this.cssKeyframeRegex="((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})",this.combinedCSSRegex="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",this.cssCommentsRegex="(\\/\\*[\\s\\S]*?\\*\\/)",this.cssImportStatementRegex=new RegExp("@import .*?;","gi")};n.prototype.stripComments=function(e){var t=new RegExp(this.cssCommentsRegex,"gi");return e.replace(t,"")},n.prototype.parse=function(e){if(void 0===e)return[];for(var t=[];;){var r=this.cssImportStatementRegex.exec(e);if(null===r)break;this.cssImportStatements.push(r[0]),t.push({selector:"@imports",type:"imports",styles:r[0]})}e=e.replace(this.cssImportStatementRegex,"");for(var n,i=new RegExp(this.cssKeyframeRegex,"gi");;){if(null===(n=i.exec(e)))break;t.push({selector:"@keyframes",type:"keyframes",styles:n[0]})}e=e.replace(i,"");for(var a=new RegExp(this.combinedCSSRegex,"gi");;){if(null===(n=a.exec(e)))break;var o="";o=void 0===n[2]?n[5].split("\r\n").join("\n").trim():n[2].split("\r\n").join("\n").trim();var s=new RegExp(this.cssCommentsRegex,"gi"),u=s.exec(o);if(null!==u&&(o=o.replace(s,"").trim()),o=o.replace(/\n+/,"\n"),-1!==o.indexOf("@media")){var l={selector:o,type:"media",subStyles:this.parse(n[3]+"\n}")};null!==u&&(l.comments=u[0]),t.push(l)}else{var d=this.parseRules(n[6]),f={selector:o,rules:d};"@font-face"===o&&(f.type="font-face"),null!==u&&(f.comments=u[0]),t.push(f)}}return t},n.prototype.parseRules=function(e){e=e.split("\r\n").join("\n");var t=[];e=e.split(";");for(var r=0;r<e.length;r++){var n=e[r];if(n=n.trim(),-1!==n.indexOf(":")){n=n.split(":");var i=n[0].trim(),a=n.slice(1).join(":").trim();if(i.length<1||a.length<1)continue;t.push({directive:i,value:a})}else"base64,"===n.trim().substr(0,7)?t[t.length-1].value+=n.trim():n.length>0&&t.push({directive:"",value:n,defective:!0})}return t},n.prototype.serialize=function(e){var t="";void 0===e&&(e=this.css);for(var r=0;r<e.length;r++)"imports"===e[r].type&&(t+=e[r].styles+"\n\n");for(r=0;r<e.length;r++){var n=e[r];if(void 0!==n.selector){var i="";void 0!==n.comments&&(i=n.comments+"\n"),"media"===n.type?(t+=i+n.selector+"{\n",t+=this.getCSSForEditor(n.subStyles,1),t+="}\n\n"):"keyframes"!==n.type&&"imports"!==n.type&&(t+=this.getSpaces(0)+i+n.selector+" {\n",t+=this.getCSSOfRules(n.rules,1),t+=this.getSpaces(0)+"}\n\n")}}for(r=0;r<e.length;r++)"keyframes"===e[r].type&&(t+=e[r].styles+"\n\n");return t},n.prototype.getCSSOfRules=function(e,t){for(var r="",n=0;n<e.length;n++)void 0!==e[n]&&(void 0===e[n].defective?r+=this.getSpaces(t)+e[n].directive+": "+e[n].value+";\n":r+=this.getSpaces(t)+e[n].value+";\n");return r||"\n"},n.prototype.getSpaces=function(e){for(var t="",r=0;r<4*e;r++)t+=" ";return t},n.prototype.namespace=function(e,t){var r=e,n=t;"string"==typeof e&&(r=this.parse(e));for(var i=0;i<r.length;i++){var a=r[i];if(!(a.selector.indexOf("@font-face")>-1||a.selector.indexOf("keyframes")>-1||a.selector.indexOf("@import")>-1||a.selector.indexOf(".form-all")>-1||a.selector.indexOf("#stage")>-1))if("media"!==a.type){for(var o=a.selector.split(","),s=[],u=0;u<o.length;u++){var l=n+" "+o[u],d=o[u].trim().replace(/\s|$/,n+" ");s.push(l+","+d)}a.selector=s.join(",")}else a.subStyles=this.namespace(a.subStyles,t)}return r},e.exports=new n}])});